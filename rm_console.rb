params = {
  pickup_location_hash:{
    postal_code:"60666",
    latitude:"41.977584",
    longitude:"-87.90296549999999",
    line1:"10000 W O'Hare Ave",
    city:"Rosemont",
    state:"IL"},
  dropoff_location_hash:{
    postal_code:"61008",
    latitude:"42.204735",
    longitude:"-88.84292499999999",
    line1:"3088 Flora Road",
    city:"Belvidere",
    state:"IL"},
  pickup_time:"2023-03-10 17:51:24",
  user_id:"129238",
  virtualize:"true",
  estimate_fares:"true",
  estimate_fees:"true",
  payments_service_payment_method_id:"89394",
  service_type_key:"taxi",
  booking_requirements:"",
  metadata:"",
  total_passengers:"1",
  booking_channel_key:"iphone_taxi_magic",
  version:"2",
  provider_ids:"",
  copay_program:""
}


pickup_location = LocationSearch.location_from_hash(params[:pickup_location_hash])
dropoff_location = LocationSearch.location_from_hash(params[:dropoff_location_hash])

search_context = SearchContext.new(
  :pickup_location => pickup_location,
  :dropoff_location => dropoff_location,
  :pickup_time => Time.parse(params[:pickup_time]),
  :pickup_time_local => Time.parse(params[:pickup_time]),
  :user => User.find_by_id(params[:user_id]),
  :mileage => SearchContext.straight_line_distance(pickup_location, dropoff_location),
  :booking_channel_bitmask => 8192,
  :wav_ride => Booking::ServiceTypeChecker.new(params).wav_requested?,
  :market_key_name => nil,
  :total_passengers => params[:total_passengers] || 1,
  :incentive_type => nil
)

search_hash = {"only_bookable"=>false, "non_integrated_with_integrated"=>false, "branded_with"=>false, "if_any_branded_with"=>false, "only_taxis"=>false, "only_provider"=>false, "only_taxis_and_ny_sedans"=>false, "non_verified_with_verified"=>false, "service_type_key"=>"taxi", "payment_method_type"=>"credit_card", "estimate_fares"=>true, "estimate_fees"=>true, "filter_out_non_favorites_if_any_favorites"=>false, "halo_protection"=>false, "auto_estimate"=>false, "ignore_company_discount"=>false, "down_providers_in_directory"=>true, "virtualize"=>true, "ridecharge_payment"=>true}

fleet_search_results = ProviderSearchResult.find(
  search_context,
  search_hash
).sort

fleet_search_results
# [
# #<ProviderSearchResult:0x000000000c062050
# @provider=#<ProviderService id: 61,
# company_id: 21,
# name: "Chicago W2C Pairing",
# verified: true,
# customer_service_number: " ",
# billing_number: nil,
# dispatch_system_id: 35,
# dispatch_system_down: false,
# monitor_dispatch_system: false,
# service_type: "TAXI",
# service_type_bit_mask: 1,
# cancel_ride_cutoff_time: 0,
# api_key: "CHICAGO",
# max_lead_time: 1209600,
# accepts_rides: true,
# logo: nil,
# service_url: "https://way2i-taxi.stage.gocurb.com:6443/",
# rate_calculator_id: 44,
# low_tech_dispatch_enabled: false,
# use_serviced_counties: false,
# airport_pickup_messaging: false,
# billing_type: "realtime",
# pre_auth_cc: true,
# fleet_id: nil,
# dispatch_data_id: nil,
# dispatch_data_type: nil,
# restricted_search: 0,
# region_id: 19,
# search_algorithm: "pickup_must_be_in_service_area",
# custom_booking_rules_class: nil,
# custom_cancellation_rules_class: nil,
# vehicle_translation_class: nil,
# type: "ProviderService",
# provider_group_id: nil,
# priority_provider_id: nil,
# key_name: "chicago_w2c_pairing",
# rips_key: nil,
# real_time_system_active: false,
# vehicle_wizard: true,
# requires_rate: false,
# must_enter_confirmation_number: false,
# provider_client_tester_id: nil,
# report_recipients: nil,
# dispatch_send_postal_code: nil,
# tip_type: "estimated",
# tip_attribute: nil,
# book_without_async_rates: nil,
# in_car_cash_permitted: true,
# dispatch_phone_number: nil,
# rank: 100,
# vip_level: nil,
# referral_fee: nil,
# referral_rate: nil,
# cash_channel_bitmask: 17956864,
# driver_name_formatter_id: nil,
# dispatch_sms_enabled: false,
# dispatch_sms_default_area_code: nil,
# dispatch_sms_calltaker_option: false,
# total_vehicles: nil,
# dispatch_recording_enabled: true,
# send_ride_emails: true,
# sms_marketing_provider_id: nil,
# accounting_group_id: 22,
# average_ride_cost: 25,
# cash_only: false,
# debug_dispatch_system: true,
# time_zone_olson_id: 41,
# locale: "en_US",
# country_code: "US",
# show_address: true,
# show_time_to_dispatch: false,
# show_time_to_pick_up: false,
# wheel_chair_accessible: nil,
# computerized_dispatch: true,
# mission: nil,
# gps_tracking: 1,
# coming_soon: false,
# credit_card_swipe_style_id: nil,
# credit_card_swipe_style_key: nil,
# iphone_logo: nil,
# location_id: nil,
# phoned_count: 0,
# created_at: "2016-09-22 14:19:13",
# updated_at: "2022-05-19 10:57:24",
# tag_line: nil,
# booking_smsc_id: nil,
# send_voucher_pdf_to: nil,
# send_provider_report_to: nil,
# test_location_id: nil,
# reference_location_id: nil,
# gps_refresh_rate: 20,
# direct_message_drivers: true,
# ivr_dispatch_notifications: false,
# twilio_verified_phone_number: false,
# service_fee_type: "absolute",
# number_of_dispatch_offers: nil,
# seconds_for_dispatch_offer: nil,
# booking_fee: 0.195e1,
# charge_rc_payment_referral_fee: true,
# virtual: false,
# credit_card_channel_bitmask: 65535,
# merchant_card_processing_fee: 0.0,
# fixed_processing_fee: 0.0,
# variable_processing_rate: 0.0>,
# @provider_id=nil,
# @estimated_fare=136.21,
# @estimated_rider_fare=153.03,
# @estimated_base_fare=168.16,
# @estimated_fee=1.5,
# @estimated_fare_components={:improvement_surcharge=>1.0,
# :state_surcharge=>0.5,
# :driver_discounted_fare=>136.21,
# :rider_discounted_fare=>153.03,
# :base_fare=>168.16,
# :driver_surge=>nil,
# :minimum_fare_adjustment=>nil,
# :driver_visible_incentives_amount=>nil,
# :estimated_distance=>60.18166405877599,
# :estimated_time=>60.833333333333336,
# :driver_discount=>0.19,
# :marketplace_pricing=>true,
# :rider_discount=>0.09,
# :tip_amount=>30.91,
# :tip_percentage=>20},
# @estimate_id=1427041,
# @supported_fare_type="flat",
# @no_service_fee=true,
# @fares=[{:type=>:fare,
# :name=>"Fare",
# :amount=>136.21},
# {:type=>:rider_fare,
# :amount=>153.03},
# {:type=>:base_fare,
# :amount=>168.16},
# {:type=>:surge,
# :amount=>nil},
# {:type=>:minimum_fare_adjustment,
# :amount=>nil},
# {:type=>:driver_visible_incentives_amount,
# :amount=>nil},
# {:type=>:company_discount_amount,
# :amount=>nil},
# {:type=>:est_distance,
# :value=>60.18166405877599},
# {:type=>:est_time,
# :value=>60.833333333333336},
# {:type=>:market_service_detail_id,
# :value=>67},
# {:type=>:metered_if_possible,
# :value=>nil}],
# @service_area=#<ServiceAreaZone id: 547,
# type: "ServiceAreaZone",
# service_area_group_id: 52,
# postal_code: nil,
# county: nil,
# state: nil,
# location_id: nil,
# zone_id: 129,
# extras_direction_code: nil,
# extras_amount: nil,
# active: true,
# pickup_range: false,
# excluded: false,
# created_at: "2020-06-16 22:18:48",
# updated_at: "2022-04-08 11:10:11",
# channel_bitmask: 33439711,
# country_id: 1,
# fsa: nil,
# extended_dropoff_range: false,
# halo: false>,
# @service_area_id=nil,
# @service_area_group=#<ServiceAreaGroup id: 52,
# name: "Chicago W2C Pairing SAG",
# active: true,
# created_at: "2017-08-16 19:22:49",
# updated_at: "2017-08-16 19:22:49">,
# @service_area_group_id=nil,
# @modifiers=[],
# @messages=[],
# @popups=[],
# @viewable=true,
# @pickup_and_dropoff_match=true,
# @from_call_stand=false,
# @flat_discount=0.19,
# @flat_rider_discount=0.09,
# @flat_company_discount=nil,
# @driver_upcharge=nil,
# @rider_upcharge=nil,
# @surge_multiplier=nil,
# @flat_minimum=nil,
# @fare_minimum=10,
# @minimum_distance_in_miles=nil,
# @minimum_time_in_seconds=nil,
# @meterless=true,
# @incentive=nil,
# @incentives={},
# @company_id=nil,
# @marketplace_pricing=true,
# @static_fare=nil,
# @ride_id=nil,
# @fare_estimate_type=nil,
# @from_zone="chicago_ohare_airport",
# @to_zone="chicago",
# @route_id=nil,
# @route_polyline="uue_GfrowOu@lAiAzCa@pBCx@Gx@K|@`AJP@NCVKNQhFcMH]?e@Ke@{AsDeE{JeAkCg@e@w@QwGIq@Ia@Gk@@a@G_@Oi@a@g@{@Kg@Es@PmF?WPaA`@s@~AuBHY`AoAtCoDtJgLh@{@n@wA`@oAj@cEDmACsBUkCs@yCaQmj@yFuQcEiN{@_Es@cF[kEM_HEcHRSJo@Pk@V_@h@Y^ERBVH\\ZT`@H`@BdAKl@MZUX]Ra@Fu@CaD_@mAWqCw@g@e@u@kAcAoCw@}Ae@e@_Aq@{@WSEMQg@GYE[Ag@AkBL{A^gM`EqBz@iA~@iA~A}@`CY`Aw@fC]x@]dA_@z@y@tA_ChC_@`@En@o@l@uDtDmAlAoApAoB~BiBpCyApCy@pBkDtJuPre@wRxi@}FjPeDxJ{@bDcAlEuEvWiQvcAw[|jB}B|NaApH_Fla@}Hjp@eBnNi@vDiA`F{ApEaBnDaAbB}BfD}BjD_K`OiO|TwY|b@{J|NaGpJiEdIiDhH{BnFgIxT}Pve@au@zsBeJdWiDbKoDhMaAzDyA~GcB`JmBjMeAxI{@rJyCre@mQ`uCoHplAuMxvBgHjjAm@hK[pHGfDAhG?hQ?r|A?zo@?lj@@rfCDzoHJ~dIDn~CMvIUzFm@~HqCfVoJlx@}Fxf@kDtY{@rGkAxGkAbFy@`DsJvYsIbWsXfy@mU`r@{d@duAob@poAkSdm@kB~FgCbJmBzH_g@xwBc@fBkAfEuBxGcB|EsCpHqCnHgNj^{g@nsAi_@vaAmDjJ{BzHcAdE{@rEmCtPsEpYsDlUwNh~@sVx}AwDrUgOl`A}L~v@aPhcAcDvQ}BpLkLzk@uV~nAqe@paCaPfx@yDhR}EzSwVdbAcj@lzB{]xvA}Pnr@{It]{DnOkKnb@mXpgA}FfVgKrb@cJd`@_Klb@wLvg@_FdVwGv\\wQl~@aLpk@mXruA{Qr~@yM|q@uKfj@wDvRqDdQuBxIaDjLyDlMoVhy@cPvi@yGpTuOnh@w@hDu@jEa@`Da@lEYjHCnJAhXC|UCxo@?nKA~BM\\AbACrAAlAK`D_@xBm@`BqBdEk@jAo@|AUjAC~@?zI@|QGpBG^K\\g@p@MNq@VsCrAkFbCWToBp@kBj@_Cr@{DjAP||@Lbl@BbO`C@hEAhO@`Q?fQBpr@ElzAFtD?jK??fBB`C",
# @route_path=nil,
# @estimated_surge=nil,
# @stepper=nil,
# @geocoder="google",
# @fare_estimate={"id"=>1427041,
# "ride_id"=>nil,
# "user_id"=>127846,
# "provider_id"=>61,
# "company_id"=>nil,
# "booking_channel_id"=>14,
# "service_type_id"=>2,
# "from_zone"=>"chicago_ohare_airport",
# "to_zone"=>"chicago",
# "from_latitude"=>41.977584,
# "from_longitude"=>-87.902966,
# "to_latitude"=>42.204735,
# "to_longitude"=>-88.842925,
# "estimated_distance"=>60.18,
# "estimated_time"=>60.83,
# "driver_discount"=>0.19,
# "rider_discount"=>0.09,
# "tip_percentage"=>20,
# "base_fare"=>16816,
# "driver_discounted_fare"=>13621,
# "rider_discounted_fare"=>15303,
# "improvement_surcharge"=>100,
# "state_surcharge"=>50,
# "tip_amount"=>3091,
# "type"=>"Estimated",
# "no_service_fee"=>true,
# "marketplace_pricing"=>true,
# "total_fee"=>150,
# "total_fare"=>15453,
# "rider_fare"=>15453},
# @dropoff_required=false>
# ]


ServiceArea.find_by_location_via_zones(dropoff_location, channel_bitmask = BookingChannel.bitmask_all)
# [
#<ServiceAreaZone id: 32, type: "ServiceAreaZone", service_area_group_id: 16, postal_code: nil, county: nil, state: nil, location_id: nil, zone_id: 14, extras_direction_code: nil, extras_amount: nil, active: true, pickup_range: false, excluded: false, created_at: "2016-09-21 12:45:09", updated_at: "2020-05-20 08:52:28", channel_bitmask: 1180048, country_id: 1, fsa: nil, extended_dropoff_range: false, halo: false>
#<ServiceAreaZone id: 136, type: "ServiceAreaZone", service_area_group_id: 44, postal_code: nil, county: nil, state: nil, location_id: nil, zone_id: 14, extras_direction_code: nil, extras_amount: nil, active: true, pickup_range: false, excluded: false, created_at: "2017-04-14 14:57:34", updated_at: "2017-04-14 20:38:52", channel_bitmask: 0, country_id: 1, fsa: nil, extended_dropoff_range: false, halo: false>
#<ServiceArea id: 127, type: nil, service_area_group_id: 16, postal_code: nil, county: nil, state: nil, location_id: nil, zone_id: 23, extras_direction_code: nil, extras_amount: nil, active: false, pickup_range: false, excluded: false, created_at: "2017-04-14 19:02:52", updated_at: "2017-04-14 19:31:23", channel_bitmask: 0, country_id: 1, fsa: nil, extended_dropoff_range: false, halo: false>
#<ServiceArea id: 137, type: nil, service_area_group_id: 44, postal_code: nil, county: nil, state: nil, location_id: nil, zone_id: 23, extras_direction_code: nil, extras_amount: nil, active: false, pickup_range: false, excluded: false, created_at: "2017-04-14 19:03:35", updated_at: "2017-04-14 20:38:52", channel_bitmask: 0, country_id: 1, fsa: nil, extended_dropoff_range: false, halo: false>
#<ServiceAreaZone id: 154, type: "ServiceAreaZone", service_area_group_id: 116, postal_code: nil, county: nil, state: nil, location_id: nil, zone_id: 23, extras_direction_code: nil, extras_amount: nil, active: true, pickup_range: false, excluded: false, created_at: "2017-06-27 17:32:36", updated_at: "2022-07-21 14:04:52", channel_bitmask: 30548105, country_id: 5, fsa: nil, extended_dropoff_range: false, halo: false>
#<ServiceAreaZone id: 547, type: "ServiceAreaZone", service_area_group_id: 52, postal_code: nil, county: nil, state: nil, location_id: nil, zone_id: 129, extras_direction_code: nil, extras_amount: nil, active: true, pickup_range: false, excluded: false, created_at: "2020-06-16 22:18:48", updated_at: "2022-04-08 11:10:11", channel_bitmask: 33439711, country_id: 1, fsa: nil, extended_dropoff_range: false, halo: false>
#<ServiceAreaZone id: 551, type: "ServiceAreaZone", service_area_group_id: 14, postal_code: nil, county: nil, state: nil, location_id: nil, zone_id: 130, extras_direction_code: nil, extras_amount: nil, active: true, pickup_range: false, excluded: false, created_at: "2020-06-22 17:41:02", updated_at: "2022-05-19 10:27:47", channel_bitmask: 20856728, country_id: 5, fsa: nil, extended_dropoff_range: false, halo: false>
#<ServiceAreaZone id: 620, type: "ServiceAreaZone", service_area_group_id: 49, postal_code: nil, county: nil, state: nil, location_id: nil, zone_id: 151, extras_direction_code: nil, extras_amount: nil, active: true, pickup_range: false, excluded: false, created_at: "2021-02-18 21:18:43", updated_at: "2022-07-19 13:55:15", channel_bitmask: 31326447, country_id: 5, fsa: nil, extended_dropoff_range: false, halo: false>
# ]


ServiceArea.find_by_dropoff_location(dropoff_location, channel = BookingChannel.bitmask_all)
# [
#<ServiceAreaZone id: 32, type: "ServiceAreaZone", service_area_group_id: 16, postal_code: nil, county: nil, state: nil, location_id: nil, zone_id: 14, extras_direction_code: nil, extras_amount: nil, active: true, pickup_range: false, excluded: false, created_at: "2016-09-21 12:45:09", updated_at: "2020-05-20 08:52:28", channel_bitmask: 1180048, country_id: 1, fsa: nil, extended_dropoff_range: false, halo: false>,
#<ServiceAreaZone id: 136, type: "ServiceAreaZone", service_area_group_id: 44, postal_code: nil, county: nil, state: nil, location_id: nil, zone_id: 14, extras_direction_code: nil, extras_amount: nil, active: true, pickup_range: false, excluded: false, created_at: "2017-04-14 14:57:34", updated_at: "2017-04-14 20:38:52", channel_bitmask: 0, country_id: 1, fsa: nil, extended_dropoff_range: false, halo: false>,
#<ServiceAreaZone id: 154, type: "ServiceAreaZone", service_area_group_id: 116, postal_code: nil, county: nil, state: nil, location_id: nil, zone_id: 23, extras_direction_code: nil, extras_amount: nil, active: true, pickup_range: false, excluded: false, created_at: "2017-06-27 17:32:36", updated_at: "2022-07-21 14:04:52", channel_bitmask: 30548105, country_id: 5, fsa: nil, extended_dropoff_range: false, halo: false>,
#<ServiceAreaZone id: 547, type: "ServiceAreaZone", service_area_group_id: 52, postal_code: nil, county: nil, state: nil, location_id: nil, zone_id: 129, extras_direction_code: nil, extras_amount: nil, active: true, pickup_range: false, excluded: false, created_at: "2020-06-16 22:18:48", updated_at: "2022-04-08 11:10:11", channel_bitmask: 33439711, country_id: 1, fsa: nil, extended_dropoff_range: false, halo: false>,
#<ServiceAreaZone id: 551, type: "ServiceAreaZone", service_area_group_id: 14, postal_code: nil, county: nil, state: nil, location_id: nil, zone_id: 130, extras_direction_code: nil, extras_amount: nil, active: true, pickup_range: false, excluded: false, created_at: "2020-06-22 17:41:02", updated_at: "2022-05-19 10:27:47", channel_bitmask: 20856728, country_id: 5, fsa: nil, extended_dropoff_range: false, halo: false>,
#<ServiceAreaZone id: 620, type: "ServiceAreaZone", service_area_group_id: 49, postal_code: nil, county: nil, state: nil, location_id: nil, zone_id: 151, extras_direction_code: nil, extras_amount: nil, active: true, pickup_range: false, excluded: false, created_at: "2021-02-18 21:18:43", updated_at: "2022-07-19 13:55:15", channel_bitmask: 31326447, country_id: 5, fsa: nil, extended_dropoff_range: false, halo: false>,
#<ServiceArea id: 127, type: nil, service_area_group_id: 16, postal_code: nil, county: nil, state: nil, location_id: nil, zone_id: 23, extras_direction_code: nil, extras_amount: nil, active: false, pickup_range: false, excluded: false, created_at: "2017-04-14 19:02:52", updated_at: "2017-04-14 19:31:23", channel_bitmask: 0, country_id: 1, fsa: nil, extended_dropoff_range: false, halo: false>,
#<ServiceArea id: 137, type: nil, service_area_group_id: 44, postal_code: nil, county: nil, state: nil, location_id: nil, zone_id: 23, extras_direction_code: nil, extras_amount: nil, active: false, pickup_range: false, excluded: false, created_at: "2017-04-14 19:03:35", updated_at: "2017-04-14 20:38:52", channel_bitmask: 0, country_id: 1, fsa: nil, extended_dropoff_range: false, halo: false>
# ]


service_areas = ServiceArea.find_by_search_context(search_context) # 10 service areas
# [
# #<ServiceAreaZone id: 154, type: "ServiceAreaZone", service_area_group_id: 116, postal_code: nil, county: nil, state: nil, location_id: nil, zone_id: 23, extras_direction_code: nil, extras_amount: nil, active: true, pickup_range: false, excluded: false, created_at: "2017-06-27 17:32:36", updated_at: "2022-07-21 14:04:52", channel_bitmask: 30548105, country_id: 5, fsa: nil, extended_dropoff_range: false, halo: false>,
# #<ServiceAreaZone id: 547, type: "ServiceAreaZone", service_area_group_id: 52, postal_code: nil, county: nil, state: nil, location_id: nil, zone_id: 129, extras_direction_code: nil, extras_amount: nil, active: true, pickup_range: false, excluded: false, created_at: "2020-06-16 22:18:48", updated_at: "2022-04-08 11:10:11", channel_bitmask: 33439711, country_id: 1, fsa: nil, extended_dropoff_range: false, halo: false>,
# #<ServiceAreaZone id: 551, type: "ServiceAreaZone", service_area_group_id: 14, postal_code: nil, county: nil, state: nil, location_id: nil, zone_id: 130, extras_direction_code: nil, extras_amount: nil, active: true, pickup_range: false, excluded: false, created_at: "2020-06-22 17:41:02", updated_at: "2022-05-19 10:27:47", channel_bitmask: 20856728, country_id: 5, fsa: nil, extended_dropoff_range: false, halo: false>,
# #<ServiceArea id: 127, type: nil, service_area_group_id: 16, postal_code: nil, county: nil, state: nil, location_id: nil, zone_id: 23, extras_direction_code: nil, extras_amount: nil, active: false, pickup_range: false, excluded: false, created_at: "2017-04-14 19:02:52", updated_at: "2017-04-14 19:31:23", channel_bitmask: 0, country_id: 1, fsa: nil, extended_dropoff_range: false, halo: false>,
# #<ServiceArea id: 137, type: nil, service_area_group_id: 44, postal_code: nil, county: nil, state: nil, location_id: nil, zone_id: 23, extras_direction_code: nil, extras_amount: nil, active: false, pickup_range: false, excluded: false, created_at: "2017-04-14 19:03:35", updated_at: "2017-04-14 20:38:52", channel_bitmask: 0, country_id: 1, fsa: nil, extended_dropoff_range: false, halo: false>,
# #<ServiceAreaZone id: 154, type: "ServiceAreaZone", service_area_group_id: 116, postal_code: nil, county: nil, state: nil, location_id: nil, zone_id: 23, extras_direction_code: nil, extras_amount: nil, active: true, pickup_range: false, excluded: false, created_at: "2017-06-27 17:32:36", updated_at: "2022-07-21 14:04:52", channel_bitmask: 30548105, country_id: 5, fsa: nil, extended_dropoff_range: false, halo: false>,
# #<ServiceAreaZone id: 547, type: "ServiceAreaZone", service_area_group_id: 52, postal_code: nil, county: nil, state: nil, location_id: nil, zone_id: 129, extras_direction_code: nil, extras_amount: nil, active: true, pickup_range: false, excluded: false, created_at: "2020-06-16 22:18:48", updated_at: "2022-04-08 11:10:11", channel_bitmask: 33439711, country_id: 1, fsa: nil, extended_dropoff_range: false, halo: false>,
# #<ServiceAreaZone id: 551, type: "ServiceAreaZone", service_area_group_id: 14, postal_code: nil, county: nil, state: nil, location_id: nil, zone_id: 130, extras_direction_code: nil, extras_amount: nil, active: true, pickup_range: false, excluded: false, created_at: "2020-06-22 17:41:02", updated_at: "2022-05-19 10:27:47", channel_bitmask: 20856728, country_id: 5, fsa: nil, extended_dropoff_range: false, halo: false>,
# #<ServiceArea id: 127, type: nil, service_area_group_id: 16, postal_code: nil, county: nil, state: nil, location_id: nil, zone_id: 23, extras_direction_code: nil, extras_amount: nil, active: false, pickup_range: false, excluded: false, created_at: "2017-04-14 19:02:52", updated_at: "2017-04-14 19:31:23", channel_bitmask: 0, country_id: 1, fsa: nil, extended_dropoff_range: false, halo: false>,
# #<ServiceArea id: 137, type: nil, service_area_group_id: 44, postal_code: nil, county: nil, state: nil, location_id: nil, zone_id: 23, extras_direction_code: nil, extras_amount: nil, active: false, pickup_range: false, excluded: false, created_at: "2017-04-14 19:03:35", updated_at: "2017-04-14 20:38:52", channel_bitmask: 0, country_id: 1, fsa: nil, extended_dropoff_range: false, halo: false>
# ]


ProviderSearchResult.service_areas_to_search_results(service_areas, search_context) # => 5 provider search results
# [
# #<ProviderSearchResult:0x000000000ac56228 @provider=#<ProviderService id: 113, company_id: 43, name: "Flash Taxi with MK ds", verified: true, customer_service_number: "(773) 907-0909", billing_number: nil, dispatch_system_id: 22, dispatch_system_down: false, monitor_dispatch_system: false, service_type: "TAXI", service_type_bit_mask: 1, cancel_ride_cutoff_time: 0, api_key: "Q1VSQl9GTEFTSC8zMDM6dzJjZGVtbw=", max_lead_time: 1209600, accepts_rides: true, logo: nil, service_url: "", rate_calculator_id: 1, low_tech_dispatch_enabled: false, use_serviced_counties: false, airport_pickup_messaging: false, billing_type: "realtime", pre_auth_cc: true, fleet_id: "158", dispatch_data_id: nil, dispatch_data_type: nil, restricted_search: 0, region_id: 3, search_algorithm: "pickup_must_be_in_service_area", custom_booking_rules_class: nil, custom_cancellation_rules_class: nil, vehicle_translation_class: nil, type: "ProviderService", provider_group_id: nil, priority_provider_id: nil, key_name: "flashtaxi_mk", rips_key: "", real_time_system_active: false, vehicle_wizard: true, requires_rate: false, must_enter_confirmation_number: false, provider_client_tester_id: 10, report_recipients: nil, dispatch_send_postal_code: nil, tip_type: "estimated", tip_attribute: nil, book_without_async_rates: nil, in_car_cash_permitted: true, dispatch_phone_number: nil, rank: 600, vip_level: nil, referral_fee: nil, referral_rate: nil, cash_channel_bitmask: 17956864, driver_name_formatter_id: 0, dispatch_sms_enabled: false, dispatch_sms_default_area_code: nil, dispatch_sms_calltaker_option: false, total_vehicles: 450, dispatch_recording_enabled: true, send_ride_emails: true, sms_marketing_provider_id: nil, accounting_group_id: 38, average_ride_cost: 25, cash_only: false, debug_dispatch_system: true, time_zone_olson_id: 41, locale: "en_US", country_code: "US", show_address: true, show_time_to_dispatch: false, show_time_to_pick_up: false, wheel_chair_accessible: nil, computerized_dispatch: true, mission: nil, gps_tracking: 1, coming_soon: false, credit_card_swipe_style_id: nil, credit_card_swipe_style_key: nil, iphone_logo: nil, location_id: nil, phoned_count: 0, created_at: "2020-10-08 21:14:28", updated_at: "2022-05-19 10:30:11", tag_line: nil, booking_smsc_id: nil, send_voucher_pdf_to: "vouchers_city_services_chicago@gocurb.com", send_provider_report_to: "ride_reports_city_services_chicago@gocurb.com", test_location_id: 1, reference_location_id: nil, gps_refresh_rate: 20, direct_message_drivers: true, ivr_dispatch_notifications: false, twilio_verified_phone_number: false, service_fee_type: "absolute", number_of_dispatch_offers: nil, seconds_for_dispatch_offer: nil, booking_fee: 0.195e1, charge_rc_payment_referral_fee: true, virtual: false, credit_card_channel_bitmask: 65535, merchant_card_processing_fee: 0.0, fixed_processing_fee: 0.0, variable_processing_rate: 0.0>, @provider_id=nil, @estimated_fare=nil, @estimated_rider_fare=nil, @estimated_base_fare=nil, @estimated_fee=nil, @estimated_fare_components=nil, @estimate_id=nil, @supported_fare_type=nil, @no_service_fee=nil, @fares=[], @service_area=#<ServiceAreaZone id: 154, type: "ServiceAreaZone", service_area_group_id: 116, postal_code: nil, county: nil, state: nil, location_id: nil, zone_id: 23, extras_direction_code: nil, extras_amount: nil, active: true, pickup_range: false, excluded: false, created_at: "2017-06-27 17:32:36", updated_at: "2022-07-21 14:04:52", channel_bitmask: 30548105, country_id: 5, fsa: nil, extended_dropoff_range: false, halo: false>, @service_area_id=nil, @service_area_group=#<ServiceAreaGroup id: 116, name: "Flash Taxi with MK ds SAG", active: true, created_at: "2020-10-08 21:14:47", updated_at: "2020-10-08 21:14:47">, @service_area_group_id=nil, @modifiers=[], @messages=[], @popups=[], @viewable=true, @pickup_and_dropoff_match=true, @from_call_stand=false, @flat_discount=nil, @flat_rider_discount=nil, @flat_company_discount=nil, @driver_upcharge=nil, @rider_upcharge=nil, @surge_multiplier=nil, @flat_minimum=nil, @fare_minimum=nil, @minimum_distance_in_miles=nil, @minimum_time_in_seconds=nil, @meterless=nil, @incentive=nil, @incentives=nil, @company_id=nil, @marketplace_pricing=nil, @static_fare=nil, @ride_id=nil, @fare_estimate_type=nil, @from_zone=nil, @to_zone=nil, @route_id=nil, @route_polyline=nil, @route_path=nil>,
# #<ProviderSearchResult:0x000000000aa0ff78 @provider=#<ProviderService id: 61, company_id: 21, name: "Chicago W2C Pairing", verified: true, customer_service_number: " ", billing_number: nil, dispatch_system_id: 35, dispatch_system_down: false, monitor_dispatch_system: false, service_type: "TAXI", service_type_bit_mask: 1, cancel_ride_cutoff_time: 0, api_key: "CHICAGO", max_lead_time: 1209600, accepts_rides: true, logo: nil, service_url: "https://way2i-taxi.stage.gocurb.com:6443/", rate_calculator_id: 44, low_tech_dispatch_enabled: false, use_serviced_counties: false, airport_pickup_messaging: false, billing_type: "realtime", pre_auth_cc: true, fleet_id: nil, dispatch_data_id: nil, dispatch_data_type: nil, restricted_search: 0, region_id: 19, search_algorithm: "pickup_must_be_in_service_area", custom_booking_rules_class: nil, custom_cancellation_rules_class: nil, vehicle_translation_class: nil, type: "ProviderService", provider_group_id: nil, priority_provider_id: nil, key_name: "chicago_w2c_pairing", rips_key: nil, real_time_system_active: false, vehicle_wizard: true, requires_rate: false, must_enter_confirmation_number: false, provider_client_tester_id: nil, report_recipients: nil, dispatch_send_postal_code: nil, tip_type: "estimated", tip_attribute: nil, book_without_async_rates: nil, in_car_cash_permitted: true, dispatch_phone_number: nil, rank: 100, vip_level: nil, referral_fee: nil, referral_rate: nil, cash_channel_bitmask: 17956864, driver_name_formatter_id: nil, dispatch_sms_enabled: false, dispatch_sms_default_area_code: nil, dispatch_sms_calltaker_option: false, total_vehicles: nil, dispatch_recording_enabled: true, send_ride_emails: true, sms_marketing_provider_id: nil, accounting_group_id: 22, average_ride_cost: 25, cash_only: false, debug_dispatch_system: true, time_zone_olson_id: 41, locale: "en_US", country_code: "US", show_address: true, show_time_to_dispatch: false, show_time_to_pick_up: false, wheel_chair_accessible: nil, computerized_dispatch: true, mission: nil, gps_tracking: 1, coming_soon: false, credit_card_swipe_style_id: nil, credit_card_swipe_style_key: nil, iphone_logo: nil, location_id: nil, phoned_count: 0, created_at: "2016-09-22 14:19:13", updated_at: "2022-05-19 10:57:24", tag_line: nil, booking_smsc_id: nil, send_voucher_pdf_to: nil, send_provider_report_to: nil, test_location_id: nil, reference_location_id: nil, gps_refresh_rate: 20, direct_message_drivers: true, ivr_dispatch_notifications: false, twilio_verified_phone_number: false, service_fee_type: "absolute", number_of_dispatch_offers: nil, seconds_for_dispatch_offer: nil, booking_fee: 0.195e1, charge_rc_payment_referral_fee: true, virtual: false, credit_card_channel_bitmask: 65535, merchant_card_processing_fee: 0.0, fixed_processing_fee: 0.0, variable_processing_rate: 0.0>, @provider_id=nil, @estimated_fare=nil, @estimated_rider_fare=nil, @estimated_base_fare=nil, @estimated_fee=nil, @estimated_fare_components=nil, @estimate_id=nil, @supported_fare_type=nil, @no_service_fee=nil, @fares=[], @service_area=#<ServiceAreaZone id: 547, type: "ServiceAreaZone", service_area_group_id: 52, postal_code: nil, county: nil, state: nil, location_id: nil, zone_id: 129, extras_direction_code: nil, extras_amount: nil, active: true, pickup_range: false, excluded: false, created_at: "2020-06-16 22:18:48", updated_at: "2022-04-08 11:10:11", channel_bitmask: 33439711, country_id: 1, fsa: nil, extended_dropoff_range: false, halo: false>, @service_area_id=nil, @service_area_group=#<ServiceAreaGroup id: 52, name: "Chicago W2C Pairing SAG", active: true, created_at: "2017-08-16 19:22:49", updated_at: "2017-08-16 19:22:49">, @service_area_group_id=nil, @modifiers=[], @messages=[], @popups=[], @viewable=true, @pickup_and_dropoff_match=true, @from_call_stand=false, @flat_discount=nil, @flat_rider_discount=nil, @flat_company_discount=nil, @driver_upcharge=nil, @rider_upcharge=nil, @surge_multiplier=nil, @flat_minimum=nil, @fare_minimum=nil, @minimum_distance_in_miles=nil, @minimum_time_in_seconds=nil, @meterless=nil, @incentive=nil, @incentives=nil, @company_id=nil, @marketplace_pricing=nil, @static_fare=nil, @ride_id=nil, @fare_estimate_type=nil, @from_zone=nil, @to_zone=nil, @route_id=nil, @route_polyline=nil, @route_path=nil>,
# #<ProviderSearchResult:0x000000000a7cc1d0 @provider=#<ProviderService id: 16, company_id: 15, name: "Way2Cloud Whiskey", verified: false, customer_service_number: "(202) 555-6677", billing_number: nil, dispatch_system_id: 34, dispatch_system_down: false, monitor_dispatch_system: false, service_type: nil, service_type_bit_mask: 1, cancel_ride_cutoff_time: nil, api_key: "REVNT1RFU1Q6REVNT1RFU1Q", max_lead_time: nil, accepts_rides: true, logo: nil, service_url: "https://api-stg.way2cloud.gocurb.com:8888/WhiskySer...", rate_calculator_id: 1, low_tech_dispatch_enabled: nil, use_serviced_counties: false, airport_pickup_messaging: false, billing_type: "realtime", pre_auth_cc: true, fleet_id: "56", dispatch_data_id: nil, dispatch_data_type: nil, restricted_search: 0, region_id: 3, search_algorithm: "standard", custom_booking_rules_class: nil, custom_cancellation_rules_class: nil, vehicle_translation_class: nil, type: "ProviderService", provider_group_id: nil, priority_provider_id: nil, key_name: "way2cloud", rips_key: nil, real_time_system_active: false, vehicle_wizard: true, requires_rate: false, must_enter_confirmation_number: false, provider_client_tester_id: 3, report_recipients: nil, dispatch_send_postal_code: nil, tip_type: "estimated", tip_attribute: nil, book_without_async_rates: nil, in_car_cash_permitted: false, dispatch_phone_number: nil, rank: 10, vip_level: nil, referral_fee: nil, referral_rate: nil, cash_channel_bitmask: 17694992, driver_name_formatter_id: nil, dispatch_sms_enabled: nil, dispatch_sms_default_area_code: nil, dispatch_sms_calltaker_option: false, total_vehicles: nil, dispatch_recording_enabled: true, send_ride_emails: true, sms_marketing_provider_id: nil, accounting_group_id: 15, average_ride_cost: 40, cash_only: false, debug_dispatch_system: true, time_zone_olson_id: 99, locale: "en_US", country_code: "US", show_address: true, show_time_to_dispatch: false, show_time_to_pick_up: false, wheel_chair_accessible: nil, computerized_dispatch: true, mission: nil, gps_tracking: 1, coming_soon: false, credit_card_swipe_style_id: nil, credit_card_swipe_style_key: nil, iphone_logo: nil, location_id: nil, phoned_count: 0, created_at: "2016-09-21 12:45:08", updated_at: "2022-05-19 10:26:53", tag_line: nil, booking_smsc_id: nil, send_voucher_pdf_to: nil, send_provider_report_to: nil, test_location_id: nil, reference_location_id: nil, gps_refresh_rate: nil, direct_message_drivers: true, ivr_dispatch_notifications: false, twilio_verified_phone_number: false, service_fee_type: "absolute", number_of_dispatch_offers: nil, seconds_for_dispatch_offer: nil, booking_fee: 0.1e1, charge_rc_payment_referral_fee: nil, virtual: false, credit_card_channel_bitmask: 65535, merchant_card_processing_fee: 0.0, fixed_processing_fee: 0.0, variable_processing_rate: 0.0>, @provider_id=nil, @estimated_fare=nil, @estimated_rider_fare=nil, @estimated_base_fare=nil, @estimated_fee=nil, @estimated_fare_components=nil, @estimate_id=nil, @supported_fare_type=nil, @no_service_fee=nil, @fares=[], @service_area=#<ServiceAreaZone id: 551, type: "ServiceAreaZone", service_area_group_id: 14, postal_code: nil, county: nil, state: nil, location_id: nil, zone_id: 130, extras_direction_code: nil, extras_amount: nil, active: true, pickup_range: false, excluded: false, created_at: "2020-06-22 17:41:02", updated_at: "2022-05-19 10:27:47", channel_bitmask: 20856728, country_id: 5, fsa: nil, extended_dropoff_range: false, halo: false>, @service_area_id=nil, @service_area_group=#<ServiceAreaGroup id: 14, name: "service area group 14", active: true, created_at: "2016-09-21 12:45:08", updated_at: "2020-02-07 18:54:27">, @service_area_group_id=nil, @modifiers=[], @messages=[], @popups=[], @viewable=true, @pickup_and_dropoff_match=true, @from_call_stand=false, @flat_discount=nil, @flat_rider_discount=nil, @flat_company_discount=nil, @driver_upcharge=nil, @rider_upcharge=nil, @surge_multiplier=nil, @flat_minimum=nil, @fare_minimum=nil, @minimum_distance_in_miles=nil, @minimum_time_in_seconds=nil, @meterless=nil, @incentive=nil, @incentives=nil, @company_id=nil, @marketplace_pricing=nil, @static_fare=nil, @ride_id=nil, @fare_estimate_type=nil, @from_zone=nil, @to_zone=nil, @route_id=nil, @route_polyline=nil, @route_path=nil>,
# #<ProviderSearchResult:0x000000000a610ee0 @provider=#<ProviderService id: 19, company_id: 18, name: "Chicago Zone Fake Bounce 1", verified: false, customer_service_number: "(202) 555-6677", billing_number: nil, dispatch_system_id: 17, dispatch_system_down: false, monitor_dispatch_system: false, service_type: nil, service_type_bit_mask: 1, cancel_ride_cutoff_time: nil, api_key: "chifakebounce1", max_lead_time: nil, accepts_rides: false, logo: nil, service_url: "http://test.com", rate_calculator_id: nil, low_tech_dispatch_enabled: nil, use_serviced_counties: false, airport_pickup_messaging: false, billing_type: "realtime", pre_auth_cc: true, fleet_id: "9", dispatch_data_id: nil, dispatch_data_type: nil, restricted_search: 0, region_id: nil, search_algorithm: "standard", custom_booking_rules_class: nil, custom_cancellation_rules_class: nil, vehicle_translation_class: nil, type: "ProviderService", provider_group_id: nil, priority_provider_id: nil, key_name: "chi_fake_bounce_1", rips_key: nil, real_time_system_active: false, vehicle_wizard: false, requires_rate: false, must_enter_confirmation_number: false, provider_client_tester_id: nil, report_recipients: nil, dispatch_send_postal_code: nil, tip_type: "estimated", tip_attribute: nil, book_without_async_rates: nil, in_car_cash_permitted: false, dispatch_phone_number: nil, rank: 10, vip_level: nil, referral_fee: nil, referral_rate: nil, cash_channel_bitmask: 1179648, driver_name_formatter_id: nil, dispatch_sms_enabled: nil, dispatch_sms_default_area_code: nil, dispatch_sms_calltaker_option: false, total_vehicles: nil, dispatch_recording_enabled: nil, send_ride_emails: true, sms_marketing_provider_id: nil, accounting_group_id: 18, average_ride_cost: 40, cash_only: false, debug_dispatch_system: true, time_zone_olson_id: 41, locale: "en_US", country_code: "US", show_address: true, show_time_to_dispatch: false, show_time_to_pick_up: false, wheel_chair_accessible: nil, computerized_dispatch: nil, mission: nil, gps_tracking: nil, coming_soon: false, credit_card_swipe_style_id: nil, credit_card_swipe_style_key: nil, iphone_logo: nil, location_id: nil, phoned_count: 0, created_at: "2016-09-21 12:45:09", updated_at: "2020-07-22 19:51:15", tag_line: nil, booking_smsc_id: nil, send_voucher_pdf_to: nil, send_provider_report_to: nil, test_location_id: nil, reference_location_id: nil, gps_refresh_rate: nil, direct_message_drivers: false, ivr_dispatch_notifications: false, twilio_verified_phone_number: false, service_fee_type: "absolute", number_of_dispatch_offers: nil, seconds_for_dispatch_offer: nil, booking_fee: 0.1e1, charge_rc_payment_referral_fee: nil, virtual: false, credit_card_channel_bitmask: 65535, merchant_card_processing_fee: 0.0, fixed_processing_fee: 0.0, variable_processing_rate: 0.0>, @provider_id=nil, @estimated_fare=nil, @estimated_rider_fare=nil, @estimated_base_fare=nil, @estimated_fee=nil, @estimated_fare_components=nil, @estimate_id=nil, @supported_fare_type=nil, @no_service_fee=nil, @fares=[], @service_area=#<ServiceArea id: 127, type: nil, service_area_group_id: 16, postal_code: nil, county: nil, state: nil, location_id: nil, zone_id: 23, extras_direction_code: nil, extras_amount: nil, active: false, pickup_range: false, excluded: false, created_at: "2017-04-14 19:02:52", updated_at: "2017-04-14 19:31:23", channel_bitmask: 0, country_id: 1, fsa: nil, extended_dropoff_range: false, halo: false>, @service_area_id=nil, @service_area_group=#<ServiceAreaGroup id: 16, name: "service area group 16", active: true, created_at: "2016-09-21 12:45:09", updated_at: "2016-09-21 12:45:09">, @service_area_group_id=nil, @modifiers=[], @messages=[], @popups=[], @viewable=true, @pickup_and_dropoff_match=true, @from_call_stand=false, @flat_discount=nil, @flat_rider_discount=nil, @flat_company_discount=nil, @driver_upcharge=nil, @rider_upcharge=nil, @surge_multiplier=nil, @flat_minimum=nil, @fare_minimum=nil, @minimum_distance_in_miles=nil, @minimum_time_in_seconds=nil, @meterless=nil, @incentive=nil, @incentives=nil, @company_id=nil, @marketplace_pricing=nil, @static_fare=nil, @ride_id=nil, @fare_estimate_type=nil, @from_zone=nil, @to_zone=nil, @route_id=nil, @route_polyline=nil, @route_path=nil>,
# #<ProviderSearchResult:0x000000000a4b3980 @provider=#<ProviderService id: 49, company_id: 17, name: "Chicago Zone Fake Bounce 3", verified: false, customer_service_number: "(202) 555-6677", billing_number: nil, dispatch_system_id: 17, dispatch_system_down: true, monitor_dispatch_system: false, service_type: nil, service_type_bit_mask: 1, cancel_ride_cutoff_time: nil, api_key: "chifakebounce3", max_lead_time: nil, accepts_rides: false, logo: nil, service_url: "", rate_calculator_id: nil, low_tech_dispatch_enabled: nil, use_serviced_counties: false, airport_pickup_messaging: false, billing_type: "realtime", pre_auth_cc: true, fleet_id: "8", dispatch_data_id: nil, dispatch_data_type: nil, restricted_search: 0, region_id: nil, search_algorithm: "standard", custom_booking_rules_class: nil, custom_cancellation_rules_class: nil, vehicle_translation_class: nil, type: "ProviderService", provider_group_id: nil, priority_provider_id: nil, key_name: "chi_fake_bounce_3", rips_key: nil, real_time_system_active: false, vehicle_wizard: false, requires_rate: false, must_enter_confirmation_number: false, provider_client_tester_id: nil, report_recipients: nil, dispatch_send_postal_code: nil, tip_type: "estimated", tip_attribute: nil, book_without_async_rates: nil, in_car_cash_permitted: false, dispatch_phone_number: nil, rank: 10, vip_level: nil, referral_fee: nil, referral_rate: nil, cash_channel_bitmask: 1179648, driver_name_formatter_id: nil, dispatch_sms_enabled: nil, dispatch_sms_default_area_code: nil, dispatch_sms_calltaker_option: false, total_vehicles: nil, dispatch_recording_enabled: nil, send_ride_emails: true, sms_marketing_provider_id: nil, accounting_group_id: 17, average_ride_cost: 40, cash_only: false, debug_dispatch_system: true, time_zone_olson_id: 41, locale: "en_US", country_code: "US", show_address: true, show_time_to_dispatch: false, show_time_to_pick_up: false, wheel_chair_accessible: nil, computerized_dispatch: nil, mission: nil, gps_tracking: nil, coming_soon: false, credit_card_swipe_style_id: nil, credit_card_swipe_style_key: nil, iphone_logo: nil, location_id: nil, phoned_count: 0, created_at: "2016-09-21 12:45:08", updated_at: "2020-07-22 19:51:21", tag_line: nil, booking_smsc_id: nil, send_voucher_pdf_to: nil, send_provider_report_to: nil, test_location_id: nil, reference_location_id: nil, gps_refresh_rate: nil, direct_message_drivers: false, ivr_dispatch_notifications: false, twilio_verified_phone_number: false, service_fee_type: "absolute", number_of_dispatch_offers: nil, seconds_for_dispatch_offer: nil, booking_fee: 0.1e1, charge_rc_payment_referral_fee: nil, virtual: false, credit_card_channel_bitmask: 65535, merchant_card_processing_fee: 0.0, fixed_processing_fee: 0.0, variable_processing_rate: 0.0>, @provider_id=nil, @estimated_fare=nil, @estimated_rider_fare=nil, @estimated_base_fare=nil, @estimated_fee=nil, @estimated_fare_components=nil, @estimate_id=nil, @supported_fare_type=nil, @no_service_fee=nil, @fares=[], @service_area=#<ServiceArea id: 137, type: nil, service_area_group_id: 44, postal_code: nil, county: nil, state: nil, location_id: nil, zone_id: 23, extras_direction_code: nil, extras_amount: nil, active: false, pickup_range: false, excluded: false, created_at: "2017-04-14 19:03:35", updated_at: "2017-04-14 20:38:52", channel_bitmask: 0, country_id: 1, fsa: nil, extended_dropoff_range: false, halo: false>, @service_area_id=nil, @service_area_group=#<ServiceAreaGroup id: 44, name: "Chicago Zone Fake Bounce 3 SAG", active: true, created_at: "2017-05-24 18:42:13", updated_at: "2017-05-24 18:42:13">, @service_area_group_id=nil, @modifiers=[], @messages=[], @popups=[], @viewable=true, @pickup_and_dropoff_match=true, @from_call_stand=false, @flat_discount=nil, @flat_rider_discount=nil, @flat_company_discount=nil, @driver_upcharge=nil, @rider_upcharge=nil, @surge_multiplier=nil, @flat_minimum=nil, @fare_minimum=nil, @minimum_distance_in_miles=nil, @minimum_time_in_seconds=nil, @meterless=nil, @incentive=nil, @incentives=nil, @company_id=nil, @marketplace_pricing=nil, @static_fare=nil, @ride_id=nil, @fare_estimate_type=nil, @from_zone=nil, @to_zone=nil, @route_id=nil, @route_polyline=nil, @route_path=nil>
# ]


service_areas.map(&:service_area_group).compact.uniq.map(&:providers) # 5 providers
# [
# [#<ProviderService id: 113, company_id: 43, name: "Flash Taxi with MK ds", verified: true, customer_service_number: "(773) 907-0909", billing_number: nil, dispatch_system_id: 22, dispatch_system_down: false, monitor_dispatch_system: false, service_type: "TAXI", service_type_bit_mask: 1, cancel_ride_cutoff_time: 0, api_key: "Q1VSQl9GTEFTSC8zMDM6dzJjZGVtbw=", max_lead_time: 1209600, accepts_rides: true, logo: nil, service_url: "", rate_calculator_id: 1, low_tech_dispatch_enabled: false, use_serviced_counties: false, airport_pickup_messaging: false, billing_type: "realtime", pre_auth_cc: true, fleet_id: "158", dispatch_data_id: nil, dispatch_data_type: nil, restricted_search: 0, region_id: 3, search_algorithm: "pickup_must_be_in_service_area", custom_booking_rules_class: nil, custom_cancellation_rules_class: nil, vehicle_translation_class: nil, type: "ProviderService", provider_group_id: nil, priority_provider_id: nil, key_name: "flashtaxi_mk", rips_key: "", real_time_system_active: false, vehicle_wizard: true, requires_rate: false, must_enter_confirmation_number: false, provider_client_tester_id: 10, report_recipients: nil, dispatch_send_postal_code: nil, tip_type: "estimated", tip_attribute: nil, book_without_async_rates: nil, in_car_cash_permitted: true, dispatch_phone_number: nil, rank: 600, vip_level: nil, referral_fee: nil, referral_rate: nil, cash_channel_bitmask: 17956864, driver_name_formatter_id: 0, dispatch_sms_enabled: false, dispatch_sms_default_area_code: nil, dispatch_sms_calltaker_option: false, total_vehicles: 450, dispatch_recording_enabled: true, send_ride_emails: true, sms_marketing_provider_id: nil, accounting_group_id: 38, average_ride_cost: 25, cash_only: false, debug_dispatch_system: true, time_zone_olson_id: 41, locale: "en_US", country_code: "US", show_address: true, show_time_to_dispatch: false, show_time_to_pick_up: false, wheel_chair_accessible: nil, computerized_dispatch: true, mission: nil, gps_tracking: 1, coming_soon: false, credit_card_swipe_style_id: nil, credit_card_swipe_style_key: nil, iphone_logo: nil, location_id: nil, phoned_count: 0, created_at: "2020-10-08 21:14:28", updated_at: "2022-05-19 10:30:11", tag_line: nil, booking_smsc_id: nil, send_voucher_pdf_to: "vouchers_city_services_chicago@gocurb.com", send_provider_report_to: "ride_reports_city_services_chicago@gocurb.com", test_location_id: 1, reference_location_id: nil, gps_refresh_rate: 20, direct_message_drivers: true, ivr_dispatch_notifications: false, twilio_verified_phone_number: false, service_fee_type: "absolute", number_of_dispatch_offers: nil, seconds_for_dispatch_offer: nil, booking_fee: 0.195e1, charge_rc_payment_referral_fee: true, virtual: false, credit_card_channel_bitmask: 65535, merchant_card_processing_fee: 0.0, fixed_processing_fee: 0.0, variable_processing_rate: 0.0>],
# [#<ProviderService id: 61, company_id: 21, name: "Chicago W2C Pairing", verified: true, customer_service_number: " ", billing_number: nil, dispatch_system_id: 35, dispatch_system_down: false, monitor_dispatch_system: false, service_type: "TAXI", service_type_bit_mask: 1, cancel_ride_cutoff_time: 0, api_key: "CHICAGO", max_lead_time: 1209600, accepts_rides: true, logo: nil, service_url: "https://way2i-taxi.stage.gocurb.com:6443/", rate_calculator_id: 44, low_tech_dispatch_enabled: false, use_serviced_counties: false, airport_pickup_messaging: false, billing_type: "realtime", pre_auth_cc: true, fleet_id: nil, dispatch_data_id: nil, dispatch_data_type: nil, restricted_search: 0, region_id: 19, search_algorithm: "pickup_must_be_in_service_area", custom_booking_rules_class: nil, custom_cancellation_rules_class: nil, vehicle_translation_class: nil, type: "ProviderService", provider_group_id: nil, priority_provider_id: nil, key_name: "chicago_w2c_pairing", rips_key: nil, real_time_system_active: false, vehicle_wizard: true, requires_rate: false, must_enter_confirmation_number: false, provider_client_tester_id: nil, report_recipients: nil, dispatch_send_postal_code: nil, tip_type: "estimated", tip_attribute: nil, book_without_async_rates: nil, in_car_cash_permitted: true, dispatch_phone_number: nil, rank: 100, vip_level: nil, referral_fee: nil, referral_rate: nil, cash_channel_bitmask: 17956864, driver_name_formatter_id: nil, dispatch_sms_enabled: false, dispatch_sms_default_area_code: nil, dispatch_sms_calltaker_option: false, total_vehicles: nil, dispatch_recording_enabled: true, send_ride_emails: true, sms_marketing_provider_id: nil, accounting_group_id: 22, average_ride_cost: 25, cash_only: false, debug_dispatch_system: true, time_zone_olson_id: 41, locale: "en_US", country_code: "US", show_address: true, show_time_to_dispatch: false, show_time_to_pick_up: false, wheel_chair_accessible: nil, computerized_dispatch: true, mission: nil, gps_tracking: 1, coming_soon: false, credit_card_swipe_style_id: nil, credit_card_swipe_style_key: nil, iphone_logo: nil, location_id: nil, phoned_count: 0, created_at: "2016-09-22 14:19:13", updated_at: "2022-05-19 10:57:24", tag_line: nil, booking_smsc_id: nil, send_voucher_pdf_to: nil, send_provider_report_to: nil, test_location_id: nil, reference_location_id: nil, gps_refresh_rate: 20, direct_message_drivers: true, ivr_dispatch_notifications: false, twilio_verified_phone_number: false, service_fee_type: "absolute", number_of_dispatch_offers: nil, seconds_for_dispatch_offer: nil, booking_fee: 0.195e1, charge_rc_payment_referral_fee: true, virtual: false, credit_card_channel_bitmask: 65535, merchant_card_processing_fee: 0.0, fixed_processing_fee: 0.0, variable_processing_rate: 0.0>],
# [#<ProviderService id: 16, company_id: 15, name: "Way2Cloud Whiskey", verified: false, customer_service_number: "(202) 555-6677", billing_number: nil, dispatch_system_id: 34, dispatch_system_down: false, monitor_dispatch_system: false, service_type: nil, service_type_bit_mask: 1, cancel_ride_cutoff_time: nil, api_key: "REVNT1RFU1Q6REVNT1RFU1Q", max_lead_time: nil, accepts_rides: true, logo: nil, service_url: "https://api-stg.way2cloud.gocurb.com:8888/WhiskySer...", rate_calculator_id: 1, low_tech_dispatch_enabled: nil, use_serviced_counties: false, airport_pickup_messaging: false, billing_type: "realtime", pre_auth_cc: true, fleet_id: "56", dispatch_data_id: nil, dispatch_data_type: nil, restricted_search: 0, region_id: 3, search_algorithm: "standard", custom_booking_rules_class: nil, custom_cancellation_rules_class: nil, vehicle_translation_class: nil, type: "ProviderService", provider_group_id: nil, priority_provider_id: nil, key_name: "way2cloud", rips_key: nil, real_time_system_active: false, vehicle_wizard: true, requires_rate: false, must_enter_confirmation_number: false, provider_client_tester_id: 3, report_recipients: nil, dispatch_send_postal_code: nil, tip_type: "estimated", tip_attribute: nil, book_without_async_rates: nil, in_car_cash_permitted: false, dispatch_phone_number: nil, rank: 10, vip_level: nil, referral_fee: nil, referral_rate: nil, cash_channel_bitmask: 17694992, driver_name_formatter_id: nil, dispatch_sms_enabled: nil, dispatch_sms_default_area_code: nil, dispatch_sms_calltaker_option: false, total_vehicles: nil, dispatch_recording_enabled: true, send_ride_emails: true, sms_marketing_provider_id: nil, accounting_group_id: 15, average_ride_cost: 40, cash_only: false, debug_dispatch_system: true, time_zone_olson_id: 99, locale: "en_US", country_code: "US", show_address: true, show_time_to_dispatch: false, show_time_to_pick_up: false, wheel_chair_accessible: nil, computerized_dispatch: true, mission: nil, gps_tracking: 1, coming_soon: false, credit_card_swipe_style_id: nil, credit_card_swipe_style_key: nil, iphone_logo: nil, location_id: nil, phoned_count: 0, created_at: "2016-09-21 12:45:08", updated_at: "2022-05-19 10:26:53", tag_line: nil, booking_smsc_id: nil, send_voucher_pdf_to: nil, send_provider_report_to: nil, test_location_id: nil, reference_location_id: nil, gps_refresh_rate: nil, direct_message_drivers: true, ivr_dispatch_notifications: false, twilio_verified_phone_number: false, service_fee_type: "absolute", number_of_dispatch_offers: nil, seconds_for_dispatch_offer: nil, booking_fee: 0.1e1, charge_rc_payment_referral_fee: nil, virtual: false, credit_card_channel_bitmask: 65535, merchant_card_processing_fee: 0.0, fixed_processing_fee: 0.0, variable_processing_rate: 0.0>],
# [#<ProviderService id: 19, company_id: 18, name: "Chicago Zone Fake Bounce 1", verified: false, customer_service_number: "(202) 555-6677", billing_number: nil, dispatch_system_id: 17, dispatch_system_down: false, monitor_dispatch_system: false, service_type: nil, service_type_bit_mask: 1, cancel_ride_cutoff_time: nil, api_key: "chifakebounce1", max_lead_time: nil, accepts_rides: false, logo: nil, service_url: "http://test.com", rate_calculator_id: nil, low_tech_dispatch_enabled: nil, use_serviced_counties: false, airport_pickup_messaging: false, billing_type: "realtime", pre_auth_cc: true, fleet_id: "9", dispatch_data_id: nil, dispatch_data_type: nil, restricted_search: 0, region_id: nil, search_algorithm: "standard", custom_booking_rules_class: nil, custom_cancellation_rules_class: nil, vehicle_translation_class: nil, type: "ProviderService", provider_group_id: nil, priority_provider_id: nil, key_name: "chi_fake_bounce_1", rips_key: nil, real_time_system_active: false, vehicle_wizard: false, requires_rate: false, must_enter_confirmation_number: false, provider_client_tester_id: nil, report_recipients: nil, dispatch_send_postal_code: nil, tip_type: "estimated", tip_attribute: nil, book_without_async_rates: nil, in_car_cash_permitted: false, dispatch_phone_number: nil, rank: 10, vip_level: nil, referral_fee: nil, referral_rate: nil, cash_channel_bitmask: 1179648, driver_name_formatter_id: nil, dispatch_sms_enabled: nil, dispatch_sms_default_area_code: nil, dispatch_sms_calltaker_option: false, total_vehicles: nil, dispatch_recording_enabled: nil, send_ride_emails: true, sms_marketing_provider_id: nil, accounting_group_id: 18, average_ride_cost: 40, cash_only: false, debug_dispatch_system: true, time_zone_olson_id: 41, locale: "en_US", country_code: "US", show_address: true, show_time_to_dispatch: false, show_time_to_pick_up: false, wheel_chair_accessible: nil, computerized_dispatch: nil, mission: nil, gps_tracking: nil, coming_soon: false, credit_card_swipe_style_id: nil, credit_card_swipe_style_key: nil, iphone_logo: nil, location_id: nil, phoned_count: 0, created_at: "2016-09-21 12:45:09", updated_at: "2020-07-22 19:51:15", tag_line: nil, booking_smsc_id: nil, send_voucher_pdf_to: nil, send_provider_report_to: nil, test_location_id: nil, reference_location_id: nil, gps_refresh_rate: nil, direct_message_drivers: false, ivr_dispatch_notifications: false, twilio_verified_phone_number: false, service_fee_type: "absolute", number_of_dispatch_offers: nil, seconds_for_dispatch_offer: nil, booking_fee: 0.1e1, charge_rc_payment_referral_fee: nil, virtual: false, credit_card_channel_bitmask: 65535, merchant_card_processing_fee: 0.0, fixed_processing_fee: 0.0, variable_processing_rate: 0.0>],
# [#<ProviderService id: 49, company_id: 17, name: "Chicago Zone Fake Bounce 3", verified: false, customer_service_number: "(202) 555-6677", billing_number: nil, dispatch_system_id: 17, dispatch_system_down: true, monitor_dispatch_system: false, service_type: nil, service_type_bit_mask: 1, cancel_ride_cutoff_time: nil, api_key: "chifakebounce3", max_lead_time: nil, accepts_rides: false, logo: nil, service_url: "", rate_calculator_id: nil, low_tech_dispatch_enabled: nil, use_serviced_counties: false, airport_pickup_messaging: false, billing_type: "realtime", pre_auth_cc: true, fleet_id: "8", dispatch_data_id: nil, dispatch_data_type: nil, restricted_search: 0, region_id: nil, search_algorithm: "standard", custom_booking_rules_class: nil, custom_cancellation_rules_class: nil, vehicle_translation_class: nil, type: "ProviderService", provider_group_id: nil, priority_provider_id: nil, key_name: "chi_fake_bounce_3", rips_key: nil, real_time_system_active: false, vehicle_wizard: false, requires_rate: false, must_enter_confirmation_number: false, provider_client_tester_id: nil, report_recipients: nil, dispatch_send_postal_code: nil, tip_type: "estimated", tip_attribute: nil, book_without_async_rates: nil, in_car_cash_permitted: false, dispatch_phone_number: nil, rank: 10, vip_level: nil, referral_fee: nil, referral_rate: nil, cash_channel_bitmask: 1179648, driver_name_formatter_id: nil, dispatch_sms_enabled: nil, dispatch_sms_default_area_code: nil, dispatch_sms_calltaker_option: false, total_vehicles: nil, dispatch_recording_enabled: nil, send_ride_emails: true, sms_marketing_provider_id: nil, accounting_group_id: 17, average_ride_cost: 40, cash_only: false, debug_dispatch_system: true, time_zone_olson_id: 41, locale: "en_US", country_code: "US", show_address: true, show_time_to_dispatch: false, show_time_to_pick_up: false, wheel_chair_accessible: nil, computerized_dispatch: nil, mission: nil, gps_tracking: nil, coming_soon: false, credit_card_swipe_style_id: nil, credit_card_swipe_style_key: nil, iphone_logo: nil, location_id: nil, phoned_count: 0, created_at: "2016-09-21 12:45:08", updated_at: "2020-07-22 19:51:21", tag_line: nil, booking_smsc_id: nil, send_voucher_pdf_to: nil, send_provider_report_to: nil, test_location_id: nil, reference_location_id: nil, gps_refresh_rate: nil, direct_message_drivers: false, ivr_dispatch_notifications: false, twilio_verified_phone_number: false, service_fee_type: "absolute", number_of_dispatch_offers: nil, seconds_for_dispatch_offer: nil, booking_fee: 0.1e1, charge_rc_payment_referral_fee: nil, virtual: false, credit_card_channel_bitmask: 65535, merchant_card_processing_fee: 0.0, fixed_processing_fee: 0.0, variable_processing_rate: 0.0>]
# ]


"search_results (https://github.com/ridecharge/ride_manager/blob/a97f51c7b1189d037746ecd9abfafc1b374e6a40/app/models/provider_search_result.rb#L1199-L1240)" # 5 results
#[#<ProviderSearchResult:0x000000000df675b8
  # @provider=#<ProviderService id: 113, company_id: 43, name: "Flash Taxi with MK ds", verified: true, customer_service_number: "(773) 907-0909", billing_number: nil, dispatch_system_id: 22, dispatch_system_down: false, monitor_dispatch_system: false, service_type: "TAXI", service_type_bit_mask: 1, cancel_ride_cutoff_time: 0, api_key: "Q1VSQl9GTEFTSC8zMDM6dzJjZGVtbw=", max_lead_time: 1209600, accepts_rides: true, logo: nil, service_url: "", rate_calculator_id: 1, low_tech_dispatch_enabled: false, use_serviced_counties: false, airport_pickup_messaging: false, billing_type: "realtime", pre_auth_cc: true, fleet_id: "158", dispatch_data_id: nil, dispatch_data_type: nil, restricted_search: 0, region_id: 3, search_algorithm: "pickup_must_be_in_service_area", custom_booking_rules_class: nil, custom_cancellation_rules_class: nil, vehicle_translation_class: nil, type: "ProviderService", provider_group_id: nil, priority_provider_id: nil, key_name: "flashtaxi_mk", rips_key: "", real_time_system_active: false, vehicle_wizard: true, requires_rate: false, must_enter_confirmation_number: false, provider_client_tester_id: 10, report_recipients: nil, dispatch_send_postal_code: nil, tip_type: "estimated", tip_attribute: nil, book_without_async_rates: nil, in_car_cash_permitted: true, dispatch_phone_number: nil, rank: 600, vip_level: nil, referral_fee: nil, referral_rate: nil, cash_channel_bitmask: 17956864, driver_name_formatter_id: 0, dispatch_sms_enabled: false, dispatch_sms_default_area_code: nil, dispatch_sms_calltaker_option: false, total_vehicles: 450, dispatch_recording_enabled: true, send_ride_emails: true, sms_marketing_provider_id: nil, accounting_group_id: 38, average_ride_cost: 25, cash_only: false, debug_dispatch_system: true, time_zone_olson_id: 41, locale: "en_US", country_code: "US", show_address: true, show_time_to_dispatch: false, show_time_to_pick_up: false, wheel_chair_accessible: nil, computerized_dispatch: true, mission: nil, gps_tracking: 1, coming_soon: false, credit_card_swipe_style_id: nil, credit_card_swipe_style_key: nil, iphone_logo: nil, location_id: nil, phoned_count: 0, created_at: "2020-10-08 21:14:28", updated_at: "2022-05-19 10:30:11", tag_line: nil, booking_smsc_id: nil, send_voucher_pdf_to: "vouchers_city_services_chicago@gocurb.com", send_provider_report_to: "ride_reports_city_services_chicago@gocurb.com", test_location_id: 1, reference_location_id: nil, gps_refresh_rate: 20, direct_message_drivers: true, ivr_dispatch_notifications: false, twilio_verified_phone_number: false, service_fee_type: "absolute", number_of_dispatch_offers: nil, seconds_for_dispatch_offer: nil, booking_fee: 0.195e1, charge_rc_payment_referral_fee: true, virtual: false, credit_card_channel_bitmask: 65535, merchant_card_processing_fee: 0.0, fixed_processing_fee: 0.0, variable_processing_rate: 0.0>, @provider_id=nil, @estimated_fare=nil, @estimated_rider_fare=nil, @estimated_base_fare=nil, @estimated_fee=nil, @estimated_fare_components=nil, @estimate_id=nil, @supported_fare_type=nil, @no_service_fee=nil, @fares=[], @service_area=#<ServiceAreaZone id: 154, type: "ServiceAreaZone", service_area_group_id: 116, postal_code: nil, county: nil, state: nil, location_id: nil, zone_id: 23, extras_direction_code: nil, extras_amount: nil, active: true, pickup_range: false, excluded: false, created_at: "2017-06-27 17:32:36", updated_at: "2022-07-21 14:04:52", channel_bitmask: 30548105, country_id: 5, fsa: nil, extended_dropoff_range: false, halo: false>, @service_area_id=nil, @service_area_group=#<ServiceAreaGroup id: 116, name: "Flash Taxi with MK ds SAG", active: true, created_at: "2020-10-08 21:14:47", updated_at: "2020-10-08 21:14:47">, @service_area_group_id=nil, @modifiers=[], @messages=[], @popups=[], @viewable=true, @pickup_and_dropoff_match=true, @from_call_stand=false, @flat_discount=nil, @flat_rider_discount=nil, @flat_company_discount=nil, @driver_upcharge=nil, @rider_upcharge=nil, @surge_multiplier=nil, @flat_minimum=nil, @fare_minimum=nil, @minimum_distance_in_miles=nil, @minimum_time_in_seconds=nil, @meterless=nil, @incentive=nil, @incentives=nil, @company_id=nil, @marketplace_pricing=nil, @static_fare=nil, @ride_id=nil, @fare_estimate_type=nil, @from_zone=nil, @to_zone=nil, @route_id=nil, @route_polyline=nil, @route_path=nil>,
# #<ProviderSearchResult:0x000000000df66730
  # @provider=#<ProviderService id: 61, company_id: 21, name: "Chicago W2C Pairing", verified: true, customer_service_number: " ", billing_number: nil, dispatch_system_id: 35, dispatch_system_down: false, monitor_dispatch_system: false, service_type: "TAXI", service_type_bit_mask: 1, cancel_ride_cutoff_time: 0, api_key: "CHICAGO", max_lead_time: 1209600, accepts_rides: true, logo: nil, service_url: "https://way2i-taxi.stage.gocurb.com:6443/", rate_calculator_id: 44, low_tech_dispatch_enabled: false, use_serviced_counties: false, airport_pickup_messaging: false, billing_type: "realtime", pre_auth_cc: true, fleet_id: nil, dispatch_data_id: nil, dispatch_data_type: nil, restricted_search: 0, region_id: 19, search_algorithm: "pickup_must_be_in_service_area", custom_booking_rules_class: nil, custom_cancellation_rules_class: nil, vehicle_translation_class: nil, type: "ProviderService", provider_group_id: nil, priority_provider_id: nil, key_name: "chicago_w2c_pairing", rips_key: nil, real_time_system_active: false, vehicle_wizard: true, requires_rate: false, must_enter_confirmation_number: false, provider_client_tester_id: nil, report_recipients: nil, dispatch_send_postal_code: nil, tip_type: "estimated", tip_attribute: nil, book_without_async_rates: nil, in_car_cash_permitted: true, dispatch_phone_number: nil, rank: 100, vip_level: nil, referral_fee: nil, referral_rate: nil, cash_channel_bitmask: 17956864, driver_name_formatter_id: nil, dispatch_sms_enabled: false, dispatch_sms_default_area_code: nil, dispatch_sms_calltaker_option: false, total_vehicles: nil, dispatch_recording_enabled: true, send_ride_emails: true, sms_marketing_provider_id: nil, accounting_group_id: 22, average_ride_cost: 25, cash_only: false, debug_dispatch_system: true, time_zone_olson_id: 41, locale: "en_US", country_code: "US", show_address: true, show_time_to_dispatch: false, show_time_to_pick_up: false, wheel_chair_accessible: nil, computerized_dispatch: true, mission: nil, gps_tracking: 1, coming_soon: false, credit_card_swipe_style_id: nil, credit_card_swipe_style_key: nil, iphone_logo: nil, location_id: nil, phoned_count: 0, created_at: "2016-09-22 14:19:13", updated_at: "2022-05-19 10:57:24", tag_line: nil, booking_smsc_id: nil, send_voucher_pdf_to: nil, send_provider_report_to: nil, test_location_id: nil, reference_location_id: nil, gps_refresh_rate: 20, direct_message_drivers: true, ivr_dispatch_notifications: false, twilio_verified_phone_number: false, service_fee_type: "absolute", number_of_dispatch_offers: nil, seconds_for_dispatch_offer: nil, booking_fee: 0.195e1, charge_rc_payment_referral_fee: true, virtual: false, credit_card_channel_bitmask: 65535, merchant_card_processing_fee: 0.0, fixed_processing_fee: 0.0, variable_processing_rate: 0.0>, @provider_id=nil, @estimated_fare=nil, @estimated_rider_fare=nil, @estimated_base_fare=nil, @estimated_fee=nil, @estimated_fare_components=nil, @estimate_id=nil, @supported_fare_type=nil, @no_service_fee=nil, @fares=[], @service_area=#<ServiceAreaZone id: 547, type: "ServiceAreaZone", service_area_group_id: 52, postal_code: nil, county: nil, state: nil, location_id: nil, zone_id: 129, extras_direction_code: nil, extras_amount: nil, active: true, pickup_range: false, excluded: false, created_at: "2020-06-16 22:18:48", updated_at: "2022-04-08 11:10:11", channel_bitmask: 33439711, country_id: 1, fsa: nil, extended_dropoff_range: false, halo: false>, @service_area_id=nil, @service_area_group=#<ServiceAreaGroup id: 52, name: "Chicago W2C Pairing SAG", active: true, created_at: "2017-08-16 19:22:49", updated_at: "2017-08-16 19:22:49">, @service_area_group_id=nil, @modifiers=[], @messages=[], @popups=[], @viewable=true, @pickup_and_dropoff_match=true, @from_call_stand=false, @flat_discount=nil, @flat_rider_discount=nil, @flat_company_discount=nil, @driver_upcharge=nil, @rider_upcharge=nil, @surge_multiplier=nil, @flat_minimum=nil, @fare_minimum=nil, @minimum_distance_in_miles=nil, @minimum_time_in_seconds=nil, @meterless=nil, @incentive=nil, @incentives=nil, @company_id=nil, @marketplace_pricing=nil, @static_fare=nil, @ride_id=nil, @fare_estimate_type=nil, @from_zone=nil, @to_zone=nil, @route_id=nil, @route_polyline=nil, @route_path=nil>,
# #<ProviderSearchResult:0x000000000df65ad8
  # @provider=#<ProviderService id: 16, company_id: 15, name: "Way2Cloud Whiskey", verified: false, customer_service_number: "(202) 555-6677", billing_number: nil, dispatch_system_id: 34, dispatch_system_down: false, monitor_dispatch_system: false, service_type: nil, service_type_bit_mask: 1, cancel_ride_cutoff_time: nil, api_key: "REVNT1RFU1Q6REVNT1RFU1Q", max_lead_time: nil, accepts_rides: true, logo: nil, service_url: "https://api-stg.way2cloud.gocurb.com:8888/WhiskySer...", rate_calculator_id: 1, low_tech_dispatch_enabled: nil, use_serviced_counties: false, airport_pickup_messaging: false, billing_type: "realtime", pre_auth_cc: true, fleet_id: "56", dispatch_data_id: nil, dispatch_data_type: nil, restricted_search: 0, region_id: 3, search_algorithm: "standard", custom_booking_rules_class: nil, custom_cancellation_rules_class: nil, vehicle_translation_class: nil, type: "ProviderService", provider_group_id: nil, priority_provider_id: nil, key_name: "way2cloud", rips_key: nil, real_time_system_active: false, vehicle_wizard: true, requires_rate: false, must_enter_confirmation_number: false, provider_client_tester_id: 3, report_recipients: nil, dispatch_send_postal_code: nil, tip_type: "estimated", tip_attribute: nil, book_without_async_rates: nil, in_car_cash_permitted: false, dispatch_phone_number: nil, rank: 10, vip_level: nil, referral_fee: nil, referral_rate: nil, cash_channel_bitmask: 17694992, driver_name_formatter_id: nil, dispatch_sms_enabled: nil, dispatch_sms_default_area_code: nil, dispatch_sms_calltaker_option: false, total_vehicles: nil, dispatch_recording_enabled: true, send_ride_emails: true, sms_marketing_provider_id: nil, accounting_group_id: 15, average_ride_cost: 40, cash_only: false, debug_dispatch_system: true, time_zone_olson_id: 99, locale: "en_US", country_code: "US", show_address: true, show_time_to_dispatch: false, show_time_to_pick_up: false, wheel_chair_accessible: nil, computerized_dispatch: true, mission: nil, gps_tracking: 1, coming_soon: false, credit_card_swipe_style_id: nil, credit_card_swipe_style_key: nil, iphone_logo: nil, location_id: nil, phoned_count: 0, created_at: "2016-09-21 12:45:08", updated_at: "2022-05-19 10:26:53", tag_line: nil, booking_smsc_id: nil, send_voucher_pdf_to: nil, send_provider_report_to: nil, test_location_id: nil, reference_location_id: nil, gps_refresh_rate: nil, direct_message_drivers: true, ivr_dispatch_notifications: false, twilio_verified_phone_number: false, service_fee_type: "absolute", number_of_dispatch_offers: nil, seconds_for_dispatch_offer: nil, booking_fee: 0.1e1, charge_rc_payment_referral_fee: nil, virtual: false, credit_card_channel_bitmask: 65535, merchant_card_processing_fee: 0.0, fixed_processing_fee: 0.0, variable_processing_rate: 0.0>, @provider_id=nil, @estimated_fare=nil, @estimated_rider_fare=nil, @estimated_base_fare=nil, @estimated_fee=nil, @estimated_fare_components=nil, @estimate_id=nil, @supported_fare_type=nil, @no_service_fee=nil, @fares=[], @service_area=#<ServiceAreaZone id: 551, type: "ServiceAreaZone", service_area_group_id: 14, postal_code: nil, county: nil, state: nil, location_id: nil, zone_id: 130, extras_direction_code: nil, extras_amount: nil, active: true, pickup_range: false, excluded: false, created_at: "2020-06-22 17:41:02", updated_at: "2022-05-19 10:27:47", channel_bitmask: 20856728, country_id: 5, fsa: nil, extended_dropoff_range: false, halo: false>, @service_area_id=nil, @service_area_group=#<ServiceAreaGroup id: 14, name: "service area group 14", active: true, created_at: "2016-09-21 12:45:08", updated_at: "2020-02-07 18:54:27">, @service_area_group_id=nil, @modifiers=[], @messages=[], @popups=[], @viewable=true, @pickup_and_dropoff_match=true, @from_call_stand=false, @flat_discount=nil, @flat_rider_discount=nil, @flat_company_discount=nil, @driver_upcharge=nil, @rider_upcharge=nil, @surge_multiplier=nil, @flat_minimum=nil, @fare_minimum=nil, @minimum_distance_in_miles=nil, @minimum_time_in_seconds=nil, @meterless=nil, @incentive=nil, @incentives=nil, @company_id=nil, @marketplace_pricing=nil, @static_fare=nil, @ride_id=nil, @fare_estimate_type=nil, @from_zone=nil, @to_zone=nil, @route_id=nil, @route_polyline=nil, @route_path=nil>,
# #<ProviderSearchResult:0x000000000df64e58
  # @provider=#<ProviderService id: 19, company_id: 18, name: "Chicago Zone Fake Bounce 1", verified: false, customer_service_number: "(202) 555-6677", billing_number: nil, dispatch_system_id: 17, dispatch_system_down: false, monitor_dispatch_system: false, service_type: nil, service_type_bit_mask: 1, cancel_ride_cutoff_time: nil, api_key: "chifakebounce1", max_lead_time: nil, accepts_rides: false, logo: nil, service_url: "http://test.com", rate_calculator_id: nil, low_tech_dispatch_enabled: nil, use_serviced_counties: false, airport_pickup_messaging: false, billing_type: "realtime", pre_auth_cc: true, fleet_id: "9", dispatch_data_id: nil, dispatch_data_type: nil, restricted_search: 0, region_id: nil, search_algorithm: "standard", custom_booking_rules_class: nil, custom_cancellation_rules_class: nil, vehicle_translation_class: nil, type: "ProviderService", provider_group_id: nil, priority_provider_id: nil, key_name: "chi_fake_bounce_1", rips_key: nil, real_time_system_active: false, vehicle_wizard: false, requires_rate: false, must_enter_confirmation_number: false, provider_client_tester_id: nil, report_recipients: nil, dispatch_send_postal_code: nil, tip_type: "estimated", tip_attribute: nil, book_without_async_rates: nil, in_car_cash_permitted: false, dispatch_phone_number: nil, rank: 10, vip_level: nil, referral_fee: nil, referral_rate: nil, cash_channel_bitmask: 1179648, driver_name_formatter_id: nil, dispatch_sms_enabled: nil, dispatch_sms_default_area_code: nil, dispatch_sms_calltaker_option: false, total_vehicles: nil, dispatch_recording_enabled: nil, send_ride_emails: true, sms_marketing_provider_id: nil, accounting_group_id: 18, average_ride_cost: 40, cash_only: false, debug_dispatch_system: true, time_zone_olson_id: 41, locale: "en_US", country_code: "US", show_address: true, show_time_to_dispatch: false, show_time_to_pick_up: false, wheel_chair_accessible: nil, computerized_dispatch: nil, mission: nil, gps_tracking: nil, coming_soon: false, credit_card_swipe_style_id: nil, credit_card_swipe_style_key: nil, iphone_logo: nil, location_id: nil, phoned_count: 0, created_at: "2016-09-21 12:45:09", updated_at: "2020-07-22 19:51:15", tag_line: nil, booking_smsc_id: nil, send_voucher_pdf_to: nil, send_provider_report_to: nil, test_location_id: nil, reference_location_id: nil, gps_refresh_rate: nil, direct_message_drivers: false, ivr_dispatch_notifications: false, twilio_verified_phone_number: false, service_fee_type: "absolute", number_of_dispatch_offers: nil, seconds_for_dispatch_offer: nil, booking_fee: 0.1e1, charge_rc_payment_referral_fee: nil, virtual: false, credit_card_channel_bitmask: 65535, merchant_card_processing_fee: 0.0, fixed_processing_fee: 0.0, variable_processing_rate: 0.0>, @provider_id=nil, @estimated_fare=nil, @estimated_rider_fare=nil, @estimated_base_fare=nil, @estimated_fee=nil, @estimated_fare_components=nil, @estimate_id=nil, @supported_fare_type=nil, @no_service_fee=nil, @fares=[], @service_area=#<ServiceArea id: 127, type: nil, service_area_group_id: 16, postal_code: nil, county: nil, state: nil, location_id: nil, zone_id: 23, extras_direction_code: nil, extras_amount: nil, active: false, pickup_range: false, excluded: false, created_at: "2017-04-14 19:02:52", updated_at: "2017-04-14 19:31:23", channel_bitmask: 0, country_id: 1, fsa: nil, extended_dropoff_range: false, halo: false>, @service_area_id=nil, @service_area_group=#<ServiceAreaGroup id: 16, name: "service area group 16", active: true, created_at: "2016-09-21 12:45:09", updated_at: "2016-09-21 12:45:09">, @service_area_group_id=nil, @modifiers=[], @messages=[], @popups=[], @viewable=true, @pickup_and_dropoff_match=true, @from_call_stand=false, @flat_discount=nil, @flat_rider_discount=nil, @flat_company_discount=nil, @driver_upcharge=nil, @rider_upcharge=nil, @surge_multiplier=nil, @flat_minimum=nil, @fare_minimum=nil, @minimum_distance_in_miles=nil, @minimum_time_in_seconds=nil, @meterless=nil, @incentive=nil, @incentives=nil, @company_id=nil, @marketplace_pricing=nil, @static_fare=nil, @ride_id=nil, @fare_estimate_type=nil, @from_zone=nil, @to_zone=nil, @route_id=nil, @route_polyline=nil, @route_path=nil>,
# #<ProviderSearchResult:0x000000000df64098
  # @provider=#<ProviderService id: 49, company_id: 17, name: "Chicago Zone Fake Bounce 3", verified: false, customer_service_number: "(202) 555-6677", billing_number: nil, dispatch_system_id: 17, dispatch_system_down: true, monitor_dispatch_system: false, service_type: nil, service_type_bit_mask: 1, cancel_ride_cutoff_time: nil, api_key: "chifakebounce3", max_lead_time: nil, accepts_rides: false, logo: nil, service_url: "", rate_calculator_id: nil, low_tech_dispatch_enabled: nil, use_serviced_counties: false, airport_pickup_messaging: false, billing_type: "realtime", pre_auth_cc: true, fleet_id: "8", dispatch_data_id: nil, dispatch_data_type: nil, restricted_search: 0, region_id: nil, search_algorithm: "standard", custom_booking_rules_class: nil, custom_cancellation_rules_class: nil, vehicle_translation_class: nil, type: "ProviderService", provider_group_id: nil, priority_provider_id: nil, key_name: "chi_fake_bounce_3", rips_key: nil, real_time_system_active: false, vehicle_wizard: false, requires_rate: false, must_enter_confirmation_number: false, provider_client_tester_id: nil, report_recipients: nil, dispatch_send_postal_code: nil, tip_type: "estimated", tip_attribute: nil, book_without_async_rates: nil, in_car_cash_permitted: false, dispatch_phone_number: nil, rank: 10, vip_level: nil, referral_fee: nil, referral_rate: nil, cash_channel_bitmask: 1179648, driver_name_formatter_id: nil, dispatch_sms_enabled: nil, dispatch_sms_default_area_code: nil, dispatch_sms_calltaker_option: false, total_vehicles: nil, dispatch_recording_enabled: nil, send_ride_emails: true, sms_marketing_provider_id: nil, accounting_group_id: 17, average_ride_cost: 40, cash_only: false, debug_dispatch_system: true, time_zone_olson_id: 41, locale: "en_US", country_code: "US", show_address: true, show_time_to_dispatch: false, show_time_to_pick_up: false, wheel_chair_accessible: nil, computerized_dispatch: nil, mission: nil, gps_tracking: nil, coming_soon: false, credit_card_swipe_style_id: nil, credit_card_swipe_style_key: nil, iphone_logo: nil, location_id: nil, phoned_count: 0, created_at: "2016-09-21 12:45:08", updated_at: "2020-07-22 19:51:21", tag_line: nil, booking_smsc_id: nil, send_voucher_pdf_to: nil, send_provider_report_to: nil, test_location_id: nil, reference_location_id: nil, gps_refresh_rate: nil, direct_message_drivers: false, ivr_dispatch_notifications: false, twilio_verified_phone_number: false, service_fee_type: "absolute", number_of_dispatch_offers: nil, seconds_for_dispatch_offer: nil, booking_fee: 0.1e1, charge_rc_payment_referral_fee: nil, virtual: false, credit_card_channel_bitmask: 65535, merchant_card_processing_fee: 0.0, fixed_processing_fee: 0.0, variable_processing_rate: 0.0>, @provider_id=nil, @estimated_fare=nil, @estimated_rider_fare=nil, @estimated_base_fare=nil, @estimated_fee=nil, @estimated_fare_components=nil, @estimate_id=nil, @supported_fare_type=nil, @no_service_fee=nil, @fares=[], @service_area=#<ServiceArea id: 137, type: nil, service_area_group_id: 44, postal_code: nil, county: nil, state: nil, location_id: nil, zone_id: 23, extras_direction_code: nil, extras_amount: nil, active: false, pickup_range: false, excluded: false, created_at: "2017-04-14 19:03:35", updated_at: "2017-04-14 20:38:52", channel_bitmask: 0, country_id: 1, fsa: nil, extended_dropoff_range: false, halo: false>, @service_area_id=nil, @service_area_group=#<ServiceAreaGroup id: 44, name: "Chicago Zone Fake Bounce 3 SAG", active: true, created_at: "2017-05-24 18:42:13", updated_at: "2017-05-24 18:42:13">, @service_area_group_id=nil, @modifiers=[], @messages=[], @popups=[], @viewable=true, @pickup_and_dropoff_match=true, @from_call_stand=false, @flat_discount=nil, @flat_rider_discount=nil, @flat_company_discount=nil, @driver_upcharge=nil, @rider_upcharge=nil, @surge_multiplier=nil, @flat_minimum=nil, @fare_minimum=nil, @minimum_distance_in_miles=nil, @minimum_time_in_seconds=nil, @meterless=nil, @incentive=nil, @incentives=nil, @company_id=nil, @marketplace_pricing=nil, @static_fare=nil, @ride_id=nil, @fare_estimate_type=nil, @from_zone=nil, @to_zone=nil, @route_id=nil, @route_polyline=nil, @route_path=nil>]



# LOG
# grep -nr "85ea1a0d49ef26163ca64b1f4b65a805" ride-manager-release-*/*.unicorn

# LOCATION
sgs = ServiceGroup.where(entity_type: 'ZoneToZoneFlatFares', entity_id: 0).where("group_name like 'chicago%'")
sgs.map(&:group_name).uniq
sgs.last.groupable
ServiceGroup.where(entity_type: 'ZoneToZoneFlatFares', entity_id: 0, group_name: 'chicago').map(&:groupable).map(&:code)


